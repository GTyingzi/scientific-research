function fig = gui_fl_percolation()

a = figure(...
	'PaperUnits',get(0,'defaultfigurePaperUnits'),...
	'Color',[0.831372549019608 0.815686274509804 0.784313725490196],...
	'Colormap',[0 0 0.5625;0 0 0.625;0 0 0.6875;0 0 0.75;0 0 0.8125;0 0 0.875;0 0 0.9375;0 0 1;0 0.0625 1;0 0.125 1;0 0.1875 1;0 0.25 1;0 0.3125 1;0 0.375 1;0 0.4375 1;0 0.5 1;0 0.5625 1;0 0.625 1;0 0.6875 1;0 0.75 1;0 0.8125 1;0 0.875 1;0 0.9375 1;0 1 1;0.0625 1 1;0.125 1 0.9375;0.1875 1 0.875;0.25 1 0.8125;0.3125 1 0.75;0.375 1 0.6875;0.4375 1 0.625;0.5 1 0.5625;0.5625 1 0.5;0.625 1 0.4375;0.6875 1 0.375;0.75 1 0.3125;0.8125 1 0.25;0.875 1 0.1875;0.9375 1 0.125;1 1 0.0625;1 1 0;1 0.9375 0;1 0.875 0;1 0.8125 0;1 0.75 0;1 0.6875 0;1 0.625 0;1 0.5625 0;1 0.5 0;1 0.4375 0;1 0.375 0;1 0.3125 0;1 0.25 0;1 0.1875 0;1 0.125 0;1 0.0625 0;1 0 0;0.9375 0 0;0.875 0 0;0.8125 0 0;0.75 0 0;0.6875 0 0;0.625 0 0;0.5625 0 0],...
	'InvertHardcopy',get(0,'defaultfigureInvertHardcopy'),...
	'PaperPosition',[0.6345175 6.345175 20.30456 15.22842],...
	'PaperSize',[20.98404194812 29.67743169791],...
	'PaperType',get(0,'defaultfigurePaperType'),...
	'Position',[39 51 420 300],...
	'HandleVisibility','callback',...
	'MenuBar','none', ...
	'Tag','Fig_gui_fl_percolation');

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'FontSize',0.31924882629108,...
	'Position',[0.0289473684210526 0.86 0.947368421052632 0.1252941176470588],...
	'Style','frame',...
	'Tag','Frame1' );

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'FontSize',0.0991253644314868,...
	'Position',[0.0289473684210526 0.435294117647059 0.944736842105263 0.403529411764706],...
	'Style','frame',...
	'Tag','Frame_size');

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'FontSize',0.933333333333333,...
	'FontWeight','bold',...
	'Position',[0.139473684210526 0.897647058823529 0.726315789473684 0.05],...
	'String','Percolation',...
	'Style','text',...
	'Tag','StaticText6');



%Random media

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'FontSize',0.849999999999999,...
	'FontWeight','bold',...
	'Position',[0.352631578947368 0.777058823529412 0.2973684210526316 0.0470588235294118],...
	'String','Random media',...
	'Style','text',...
	'Tag','text6');

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'Callback','fl_percolation_compute(''radiobutton_uniform'');', ...
	'FontSize',0.666666666666667, ...
	'Position',[0.075 0.68 0.25 0.06], ...
	'String','Uniform iid', ...
	'Style','radiobutton', ...
	'Tag','Radiobutton_uniform', ...
	'Value',1);

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'HorizontalAlignment','left', ...
	'Position',[0.05 0.6 0.06 0.06], ...
	'String','Size', ...
	'Style','text', ...
	'Tag','StaticText_n_uniform');
	
	
b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','fl_percolation_compute(''edittext_n_uniform'');', ...
	'Enable','on', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'Max',0.5, ...
	'Position',[0.12 0.6 0.12 0.06], ...
	'String','100', ...
	'Style','edit', ...
	'Tag','EditText_n_uniform', ...
	'Value',100);
	
	
b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'Callback','fl_percolation_compute(''radiobutton_fbm'');', ...
	'FontSize',0.666666666666667, ...
	'Position',[0.375 0.68 0.25 0.06], ...
	'String','fBm', ...
	'Style','radiobutton', ...
	'Tag','Radiobutton_fbm', ...
	'Value',0);

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'HorizontalAlignment','left', ...
	'Enable','off', ...
	'Position',[0.35 0.6 0.06 0.06], ...
	'String','Size', ...
	'Style','text', ...
	'Tag','StaticText_n_fbm');

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','fl_percolation_compute(''edittext_n_fbm'');', ...
	'Enable','off', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'Max',0.5, ...
	'Position',[0.42 0.6 0.12 0.06], ...
	'String','128', ...
	'Style','edit', ...
	'Tag','EditText_n_fbm', ...
	'Value',128);
	
	
b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'HorizontalAlignment','left', ...
	'Enable','off', ...
	'Position',[0.385 0.5 0.06 0.06], ...
	'String','H', ...
	'Style','text', ...
	'Tag','StaticText_H_fbm');

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','fl_percolation_compute(''edittext_H_fbm'');', ...
	'Enable','off', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'Max',0.5, ...
	'Position',[0.42 0.5 0.12 0.06], ...
	'String','0.5', ...
	'Style','edit', ...
	'Tag','EditText_H_fbm', ...
	'Value',0.5);
	

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'Callback','fl_percolation_compute(''radiobutton_userdefined'');', ...
	'FontSize',0.666666666666667, ...
	'Position',[0.675 0.68 0.25 0.06], ...
	'String','User defined', ...
	'Style','radiobutton', ...
	'Tag','Radiobutton_userdefined', ...
	'Value',0);
	
	
b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'BackgroundColor',[1 1 1], ...
	'Enable','off', ...
	'HorizontalAlignment','center', ...
	'ListboxTop',0, ...
	'FontSize',0.666666666666667,...
	'Position',[0.685 0.6 0.2 0.06], ...
	'String','', ...
	'Style','edit', ...
	'Enable','inactive',...
	'Tag','EditText_input');

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'Callback','fl_percolation_compute(''launch'');', ...
	'ListboxTop',0, ...	
	'FontSize',0.666666666666667,...
	'Position',[0.685 0.5 0.2 0.06], ...
	'Enable','off', ...
	'String','Refresh', ...
	'Tag','Pushbutton_refreshInput');



%Properties

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'FontSize',0.163461538461539,...
	'Position',[0.0289473684210526 0.175882352941176 0.947368421052632 0.244705882352941],...
	'Style','frame',...
	'Tag','frame2');

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'FontSize',0.849999999999999,...
	'FontWeight','bold',...
	'Position',[0.410526315789474 0.361764705882353 0.178947368421053 0.0470588235294118],...
	'String','Properties',...
	'Style','text',...
	'Tag','StaticText_reg');

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'FontSize',0.333333333333333, ...
	'HorizontalAlignment','left', ...
	'Position',[0.085 0.23 0.15 0.12], ...
	'String','Number of iterations', ...
	'Style','text', ...
	'Tag','StaticText_max_iter');

b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'BackgroundColor',[1 1 1], ...
	'Callback','fl_percolation_compute(''edittext_max_iter'');', ...
	'FontUnits','normalized', ...
	'FontSize',0.666666666666667, ...
	'Max',0.5, ...
	'Position',[0.26 0.26 0.12 0.06], ...
	'String','1000', ...
	'Style','edit', ...
	'Tag','EditText_max_iter', ...
	'Value',1000);
	
	
b = uicontrol('Parent',a, ...
	'Units','normalized', ...
	'FontUnits','normalized', ...
	'Callback','fl_percolation_compute(''checkbox_progression'')', ...
	'FontSize',0.666666666666667, ...
	'Position',[0.5 0.26 0.4 0.06], ...
	'String','Show progression (slower)', ...
	'Style','Checkbox', ...
	'Tag','Checkbox_progression', ...
   	'Value',1);





%Buttons

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'Callback','eval([''global '' fl_percolation_compute(''compute_percolation'',who)]);', ...
	'FontSize',0.544,...
	'FontWeight','bold',...
	'Position',[0.0947368421052632 0.054705882352941 0.173684210526316 0.0735294117647059],...
	'String','Compute',...
	'Tag','Pushbutton_percolation_compute');

b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'Callback','fl_percolation_compute(''help'');',...
	'FontSize',0.544,...
	'FontWeight','bold',...
	'Position',[0.407894736842105 0.054705882352941 0.173684210526316 0.0735294117647059],...
	'String','Help',...
	'Tag','Pushbutton1');


b = uicontrol(...
	'Parent',a,...
	'Units','normalized',...
	'FontUnits','normalized',...
	'Callback','fl_percolation_compute(''close'');',...
	'FontSize',0.544,...
	'FontWeight','bold',...
	'Position',[0.718421052631579 0.054705882352941 0.173684210526316 0.0735294117647059],...
	'String','Close',...
	'Tag','Pushbutton_wclose');


fl_window_init(a);